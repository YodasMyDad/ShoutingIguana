<Window x:Class="ShoutingIguana.Views.ListModeImportDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Import URL List"
        Height="500"
        Width="650"
        MinHeight="500"
        MinWidth="650"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource BackgroundBrush}"
        ResizeMode="NoResize"
        ShowInTaskbar="False">
    
    <Grid Margin="0" KeyboardNavigation.TabNavigation="Cycle">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0"
                Background="{StaticResource SurfaceBrush}"
                BorderBrush="{StaticResource BorderLightBrush}"
                BorderThickness="0,0,0,1"
                Padding="32,24">
            <StackPanel Orientation="Horizontal">
                <Border Background="{StaticResource InfoBrush}"
                        Width="44" Height="44"
                        CornerRadius="8"
                        Margin="0,0,16,0">
                    <TextBlock Text="{StaticResource Icon.Import}"
                               Style="{StaticResource Icon}"
                               FontSize="22"
                               Foreground="White"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Border>
                <StackPanel VerticalAlignment="Center">
                    <TextBlock Text="Import URL List"
                               Style="{StaticResource TitleTextStyle}"
                               Margin="0"
                               AutomationProperties.HeadingLevel="Level1"/>
                    <TextBlock Text="Import a CSV file containing URLs to crawl"
                               Style="{StaticResource BodyTextStyle}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,4,0,0"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Settings -->
        <Border Grid.Row="1" 
                Style="{StaticResource Card}"
                Margin="{StaticResource SpacingL}">
            <StackPanel>
                <!-- File Selection -->
                <StackPanel Margin="0,0,0,24">
                    <TextBlock Text="CSV File" 
                               Style="{StaticResource FormFieldLabel}"
                               Margin="0,0,0,8"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBox Grid.Column="0"
                                 Text="{Binding CsvFilePath}"
                                 Style="{StaticResource ModernTextBox}"
                                 IsReadOnly="True"
                                 TabIndex="0"
                                 AutomationProperties.Name="CSV File Path"
                                 AutomationProperties.HelpText="Path to the selected CSV file containing URLs">
                            <TextBox.Tag>Select a CSV file...</TextBox.Tag>
                        </TextBox>
                        
                        <Button Grid.Column="1"
                                Command="{Binding BrowseFileCommand}"
                                Style="{StaticResource SecondaryButton}"
                                Margin="8,0,0,0"
                                TabIndex="1"
                                AutomationProperties.Name="Browse for CSV File"
                                AutomationProperties.HelpText="Opens a file browser to select a CSV file">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{StaticResource Icon.FolderOpen}"
                                           Style="{StaticResource Icon}"
                                           Width="16"
                                           Height="16"
                                           Margin="0,0,8,0"/>
                                <TextBlock Text="Browse"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                </StackPanel>

                <!-- Priority -->
                <StackPanel Margin="0,0,0,24">
                    <TextBlock Text="Priority" 
                               Style="{StaticResource FormFieldLabel}"
                               Margin="0,0,0,8"/>
                    <TextBox Text="{Binding Priority, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource ModernTextBox}"
                             TabIndex="2"
                             AutomationProperties.Name="URL Priority"
                             AutomationProperties.HelpText="Priority value for imported URLs. Higher values are crawled first. Default is 1000.">
                        <TextBox.Tag>1000</TextBox.Tag>
                    </TextBox>
                    <TextBlock Text="Priority for imported URLs (higher values are crawled first). Default: 1000"
                               Style="{StaticResource HelperText}"/>
                </StackPanel>

                <!-- Follow Links Option -->
                <Border Background="{StaticResource BackgroundBrush}"
                        BorderBrush="{StaticResource BorderLightBrush}"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="12">
                    <StackPanel>
                        <CheckBox IsChecked="{Binding FollowDiscoveredLinks}"
                                  FontSize="14"
                                  Margin="0"
                                  TabIndex="3"
                                  AutomationProperties.Name="Follow Discovered Links"
                                  AutomationProperties.HelpText="Enable to also crawl links discovered on imported pages. Disable for list-mode only crawling.">
                            <TextBlock Text="Follow discovered links" TextWrapping="Wrap" FontWeight="SemiBold"/>
                        </CheckBox>
                        <TextBlock Text="If unchecked, only URLs in the list will be crawled (list-mode only). If checked, links discovered on these pages will also be crawled."
                                   Style="{StaticResource HelperText}"
                                   Margin="32,6,0,0"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>

        <!-- Progress -->
        <Border Grid.Row="2"
                Style="{StaticResource InfoCard}"
                Margin="24,16,24,0"
                Visibility="{Binding IsImporting, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel>
                <TextBlock Text="{Binding ImportStatus}"
                           Style="{StaticResource BodyEmphasisTextStyle}"
                           Margin="0,0,0,8"/>
                <ProgressBar IsIndeterminate="True"
                             Style="{StaticResource ModernProgressBar}"/>
            </StackPanel>
        </Border>

        <!-- Result Message -->
        <Border Grid.Row="2"
                Style="{StaticResource SuccessMessageCard}"
                Margin="24,16,24,0"
                Visibility="{Binding ImportComplete, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{StaticResource Icon.Success}"
                           Style="{StaticResource Icon}"
                           Foreground="{StaticResource SuccessBrush}"
                           Margin="0,0,12,0"/>
                <TextBlock Text="{Binding ResultMessage}"
                           Style="{StaticResource BodyTextStyle}"/>
            </StackPanel>
        </Border>

        <!-- Actions -->
        <Border Grid.Row="3"
                Background="{StaticResource SurfaceBrush}"
                BorderBrush="{StaticResource BorderLightBrush}"
                BorderThickness="0,1,0,0"
                Padding="32,20">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Cancel"
                        Command="{Binding CancelCommand}"
                        Style="{StaticResource SecondaryButton}"
                        Margin="0,0,12,0"
                        TabIndex="4"
                        IsCancel="True"
                        IsEnabled="{Binding IsImporting, Converter={StaticResource InverseBooleanConverter}}"
                        AutomationProperties.Name="Cancel Import"
                        AutomationProperties.HelpText="Cancels the URL import and closes the dialog"/>
                <Button Content="Import"
                        Command="{Binding ImportCommand}"
                        Style="{StaticResource PrimaryButton}"
                        Height="48"
                        TabIndex="5"
                        IsDefault="True"
                        IsEnabled="{Binding CanImport}"
                        AutomationProperties.Name="Start Import"
                        AutomationProperties.HelpText="Begins importing URLs from the selected CSV file"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>

