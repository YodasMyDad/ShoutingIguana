<Window x:Class="ShoutingIguana.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Shouting Iguana"
        Height="800"
        Width="1200"
        MinHeight="600"
        MinWidth="900"
        Icon="Assets/logo.png"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}"
        Foreground="{StaticResource TextPrimaryBrush}"
        UseLayoutRounding="True"
        TextOptions.TextFormattingMode="Display">
    
    <Window.InputBindings>
        <KeyBinding Key="N" Modifiers="Control" Command="{Binding NewProjectCommand}"/>
        <KeyBinding Key="O" Modifiers="Control" Command="{Binding OpenProjectCommand}"/>
        <KeyBinding Key="W" Modifiers="Control" Command="{Binding CloseProjectCommand}"/>
        <KeyBinding Key="D1" Modifiers="Control" Command="{Binding NavigateToProjectHomeCommand}"/>
        <KeyBinding Key="D2" Modifiers="Control" Command="{Binding NavigateToFindingsCommand}"/>
        <KeyBinding Key="D3" Modifiers="Control" Command="{Binding NavigateToExtensionsCommand}"/>
        <KeyBinding Key="F5" Command="{Binding RefreshCommand}"/>
        <KeyBinding Key="F6" Command="{Binding StartCrawlCommand}"/>
        <KeyBinding Key="F8" Command="{Binding StopCrawlCommand}"/>
    </Window.InputBindings>
    
    <DockPanel>
        <!-- Menu Bar -->
        <Border DockPanel.Dock="Top" 
                Background="{StaticResource SurfaceBrush}"
                BorderThickness="0,0,0,1"
                BorderBrush="{StaticResource BorderLightBrush}">
            <Menu Background="Transparent" 
                  Padding="4,2"
                  IsEnabled="{Binding IsInitializing, Converter={StaticResource InverseBooleanConverter}}"
                  AutomationProperties.Name="Main Menu"
                  AutomationProperties.HelpText="Main application menu with File, View, Crawl, Tools, and Help options">
            <MenuItem Header="_File">
                <MenuItem Header="_New Project" Command="{Binding NewProjectCommand}" InputGestureText="Ctrl+N">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.FolderAdd}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="_Open Project" Command="{Binding OpenProjectCommand}" InputGestureText="Ctrl+O">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.FolderOpen}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Recent Projects" x:Name="RecentProjectsMenu">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.History}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                    <MenuItem Header="(No recent projects)"/>
                </MenuItem>
                <MenuItem Header="_Close Project" Command="{Binding CloseProjectCommand}" InputGestureText="Ctrl+W"
                          Visibility="{Binding HasOpenProject, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Close}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator Visibility="{Binding HasOpenProject, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                <MenuItem Header="_Export"
                          Visibility="{Binding HasOpenProject, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Export}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                    <MenuItem Header="Export to _CSV..." Command="{Binding ExportToCsvCommand}">
                        <MenuItem.Icon>
                            <TextBlock Text="{StaticResource Icon.FileCSV}" Style="{StaticResource Icon}"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Export to _Excel..." Command="{Binding ExportToExcelCommand}">
                        <MenuItem.Icon>
                            <TextBlock Text="{StaticResource Icon.FileExcel}" Style="{StaticResource Icon}"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
                <Separator/>
                <MenuItem Header="E_xit" Command="{Binding ExitCommand}">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Exit}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="_View">
                <MenuItem Header="Project _Home" Command="{Binding NavigateToProjectHomeCommand}" InputGestureText="Ctrl+1"
                          Visibility="{Binding HasOpenProject, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Home}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="_Findings" Command="{Binding NavigateToFindingsCommand}" InputGestureText="Ctrl+2"
                          Visibility="{Binding HasOpenProject, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Search}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator Visibility="{Binding HasOpenProject, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                <MenuItem Header="_Extensions" Command="{Binding NavigateToExtensionsCommand}" InputGestureText="Ctrl+3">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Puzzle}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator Visibility="{Binding HasOpenProject, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                <MenuItem Header="_Refresh" Command="{Binding RefreshCommand}" InputGestureText="F5"
                          Visibility="{Binding HasOpenProject, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Refresh}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="_Crawl"
                      Visibility="{Binding HasOpenProject, Converter={StaticResource BooleanToVisibilityConverter}}">
                <MenuItem Header="_Start Crawl" Command="{Binding StartCrawlCommand}" InputGestureText="F6">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Play}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Sto_p Crawl" Command="{Binding StopCrawlCommand}" InputGestureText="F8">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Stop}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="C_lear Queue" Command="{Binding ClearQueueCommand}">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Remove}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="_Tools">
                <MenuItem Header="Reinstall Playwright _Browsers..." Command="{Binding ReinstallBrowsersCommand}">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Web}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="_Options..." Command="{Binding OptionsCommand}">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Settings}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem Header="View _Logs..." Command="{Binding ViewLogsCommand}">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Document}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="_About Shouting Iguana..." Command="{Binding AboutCommand}">
                    <MenuItem.Icon>
                        <TextBlock Text="{StaticResource Icon.Info}" Style="{StaticResource Icon}"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            </Menu>
        </Border>

        <!-- Status Bar -->
        <Border DockPanel.Dock="Bottom" 
                Background="{StaticResource SurfaceBrush}"
                BorderThickness="0,1,0,0"
                BorderBrush="{StaticResource BorderLightBrush}">
            <StatusBar Background="Transparent" 
                       Padding="8,6"
                       AutomationProperties.Name="Status Bar"
                       AutomationProperties.LiveSetting="Polite">
                <StatusBarItem>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{StaticResource Icon.Folder}"
                                   Style="{StaticResource Icon}"
                                   Width="14" 
                                   Height="14"
                                   FontSize="14"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   Margin="0,0,6,0"/>
                        <TextBlock Text="{Binding ProjectName}" 
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   FontWeight="Medium"/>
                    </StackPanel>
                </StatusBarItem>
                <Separator Margin="8,0" Background="{StaticResource BorderLightBrush}"/>
                <StatusBarItem>
                    <TextBlock Text="{Binding StatusMessage}" 
                               VerticalAlignment="Center"
                               Foreground="{StaticResource TextSecondaryBrush}"/>
                </StatusBarItem>
                <Separator Margin="8,0" Background="{StaticResource BorderLightBrush}"/>
                <StatusBarItem>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{StaticResource Icon.Web}"
                                   Style="{StaticResource Icon}"
                                   Width="14" 
                                   Height="14"
                                   FontSize="14"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   Margin="0,0,6,0"/>
                        <TextBlock Text="Browser: " 
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                        <TextBlock Text="{Binding BrowserStatusText}" 
                                   VerticalAlignment="Center"
                                   Margin="4,0,0,0"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   FontWeight="SemiBold"/>
                    </StackPanel>
                </StatusBarItem>
            </StatusBar>
        </Border>

        <!-- Content Area -->
        <ContentControl Content="{Binding CurrentView}" 
                        AutomationProperties.Name="Main Content Area"/>
    </DockPanel>
    
</Window>
