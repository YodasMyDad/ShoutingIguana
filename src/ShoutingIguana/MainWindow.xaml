<Window x:Class="ShoutingIguana.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Shouting Iguana"
        Height="800"
        Width="1200"
        MinHeight="600"
        MinWidth="900"
        Icon="Assets/logo.png"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}"
        UseLayoutRounding="True"
        TextOptions.TextFormattingMode="Display">
    
    <Window.InputBindings>
        <KeyBinding Key="N" Modifiers="Control" Command="{Binding NewProjectCommand}"/>
        <KeyBinding Key="O" Modifiers="Control" Command="{Binding OpenProjectCommand}"/>
        <KeyBinding Key="W" Modifiers="Control" Command="{Binding CloseProjectCommand}"/>
        <KeyBinding Key="D1" Modifiers="Control" Command="{Binding NavigateToProjectHomeCommand}"/>
        <KeyBinding Key="D2" Modifiers="Control" Command="{Binding NavigateToCrawlDashboardCommand}"/>
        <KeyBinding Key="D3" Modifiers="Control" Command="{Binding NavigateToFindingsCommand}"/>
        <KeyBinding Key="D4" Modifiers="Control" Command="{Binding NavigateToExtensionsCommand}"/>
        <KeyBinding Key="F5" Command="{Binding RefreshCommand}"/>
        <KeyBinding Key="F6" Command="{Binding StartCrawlCommand}"/>
        <KeyBinding Key="F8" Command="{Binding StopCrawlCommand}"/>
    </Window.InputBindings>
    
    <DockPanel>
        <!-- Menu Bar -->
        <Border DockPanel.Dock="Top" 
                Background="{StaticResource SurfaceBrush}"
                BorderThickness="0,0,0,1"
                BorderBrush="{StaticResource BorderLightBrush}">
            <Menu Background="Transparent" 
                  Padding="4,2"
                  IsEnabled="{Binding IsInitializing, Converter={StaticResource InverseBooleanConverter}}">
            <MenuItem Header="_File">
                <MenuItem Header="_New Project" Command="{Binding NewProjectCommand}" InputGestureText="Ctrl+N">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="FolderPlusOutline" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="_Open Project" Command="{Binding OpenProjectCommand}" InputGestureText="Ctrl+O">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="FolderOpenOutline" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Recent Projects" x:Name="RecentProjectsMenu">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="History" Width="16" Height="16"/>
                    </MenuItem.Icon>
                    <MenuItem Header="(No recent projects)"/>
                </MenuItem>
                <MenuItem Header="_Close Project" Command="{Binding CloseProjectCommand}" InputGestureText="Ctrl+W">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="Close" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="_Export">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="Export" Width="16" Height="16"/>
                    </MenuItem.Icon>
                    <MenuItem Header="Export to _CSV..." Command="{Binding ExportToCsvCommand}">
                        <MenuItem.Icon>
                            <md:PackIcon Kind="FileDelimited" Width="16" Height="16"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Export to _Excel..." Command="{Binding ExportToExcelCommand}">
                        <MenuItem.Icon>
                            <md:PackIcon Kind="FileExcel" Width="16" Height="16"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
                <Separator/>
                <MenuItem Header="E_xit" Command="{Binding ExitCommand}">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="ExitToApp" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="_View">
                <MenuItem Header="Project _Home" Command="{Binding NavigateToProjectHomeCommand}" InputGestureText="Ctrl+1">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="Home" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="_Crawl Dashboard" Command="{Binding NavigateToCrawlDashboardCommand}" InputGestureText="Ctrl+2">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="ChartLine" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="_Findings" Command="{Binding NavigateToFindingsCommand}" InputGestureText="Ctrl+3">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="Magnify" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="_Extensions" Command="{Binding NavigateToExtensionsCommand}" InputGestureText="Ctrl+4">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="Puzzle" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="_Refresh" Command="{Binding RefreshCommand}" InputGestureText="F5">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="Refresh" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="_Crawl">
                <MenuItem Header="_Start Crawl" Command="{Binding StartCrawlCommand}" InputGestureText="F6">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="Play" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Sto_p Crawl" Command="{Binding StopCrawlCommand}" InputGestureText="F8">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="Stop" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="C_lear Queue" Command="{Binding ClearQueueCommand}">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="PlaylistRemove" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="_Tools">
                <MenuItem Header="Reinstall Playwright _Browsers..." Command="{Binding ReinstallBrowsersCommand}">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="Web" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="_Options..." Command="{Binding OptionsCommand}">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="Cog" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem Header="View _Logs..." Command="{Binding ViewLogsCommand}">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="FileDocument" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="_About Shouting Iguana..." Command="{Binding AboutCommand}">
                    <MenuItem.Icon>
                        <md:PackIcon Kind="InformationOutline" Width="16" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            </Menu>
        </Border>

        <!-- Status Bar -->
        <Border DockPanel.Dock="Bottom" 
                Background="{StaticResource SurfaceBrush}"
                BorderThickness="0,1,0,0"
                BorderBrush="{StaticResource BorderLightBrush}">
            <StatusBar Background="Transparent" Padding="8,6">
                <StatusBarItem>
                    <StackPanel Orientation="Horizontal">
                        <md:PackIcon Kind="FolderOutline" 
                                     VerticalAlignment="Center" 
                                     Width="14" 
                                     Height="14"
                                     Foreground="{StaticResource TextSecondaryBrush}"
                                     Margin="0,0,6,0"/>
                        <TextBlock Text="{Binding ProjectName}" 
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   FontWeight="Medium"/>
                    </StackPanel>
                </StatusBarItem>
                <Separator Margin="8,0" Background="{StaticResource BorderLightBrush}"/>
                <StatusBarItem>
                    <TextBlock Text="{Binding StatusMessage}" 
                               VerticalAlignment="Center"
                               Foreground="{StaticResource TextSecondaryBrush}"/>
                </StatusBarItem>
                <Separator Margin="8,0" Background="{StaticResource BorderLightBrush}"/>
                <StatusBarItem>
                    <StackPanel Orientation="Horizontal">
                        <md:PackIcon Kind="Web" 
                                     VerticalAlignment="Center" 
                                     Width="14" 
                                     Height="14"
                                     Foreground="{StaticResource TextSecondaryBrush}"
                                     Margin="0,0,6,0"/>
                        <TextBlock Text="Browser: " 
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                        <TextBlock Text="{Binding BrowserStatusText}" 
                                   VerticalAlignment="Center"
                                   Margin="4,0,0,0"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   FontWeight="SemiBold"/>
                    </StackPanel>
                </StatusBarItem>
            </StatusBar>
        </Border>

        <!-- Content Area -->
        <ContentControl Content="{Binding CurrentView}" />
    </DockPanel>
    
</Window>

