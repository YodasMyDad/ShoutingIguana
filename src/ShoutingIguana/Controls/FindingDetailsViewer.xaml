<UserControl x:Class="ShoutingIguana.Controls.FindingDetailsViewer"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:sdk="clr-namespace:ShoutingIguana.PluginSdk;assembly=ShoutingIguana.PluginSdk"
             Background="Transparent">
    
    <UserControl.Resources>
        <!-- Template for displaying a single detail item (now strings, not objects) -->
        <DataTemplate x:Key="FindingDetailTemplate"
                      DataType="{x:Type system:String}"
                      xmlns:system="clr-namespace:System;assembly=mscorlib">
            <TextBlock Text="{Binding}"
                       TextWrapping="Wrap"
                       Margin="0,2"
                       FontSize="13"
                       Foreground="{StaticResource TextPrimaryBrush}"/>
        </DataTemplate>
    </UserControl.Resources>
    
    <!-- Bind the ListBox directly to Items (now a flat list of strings) -->
    <ListBox x:Name="DetailsListBox"
             BorderThickness="0"
             Background="Transparent"
             ItemsSource="{Binding Details.Items, RelativeSource={RelativeSource AncestorType=UserControl}}"
             ItemTemplate="{StaticResource FindingDetailTemplate}"
             HorizontalAlignment="Stretch"
             VerticalAlignment="Stretch"
             ScrollViewer.HorizontalScrollBarVisibility="Disabled">
        <ListBox.ItemContainerStyle>
            <Style TargetType="ListBoxItem">
                <Setter Property="Padding" Value="4,2"/>
                <Setter Property="Margin" Value="0,1"/>
            </Style>
        </ListBox.ItemContainerStyle>
    </ListBox>
</UserControl>
